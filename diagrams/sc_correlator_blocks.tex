\begin{tikzpicture}
  \draw
  (0, 5) to[short, *-*]
  ++(2, 0) coordinate(mulsplit) to[short]
  ++(0, -1.5) coordinate(topwmeas) to[twoport, t=$\bm{z}^{-\frac{N}{2}}$]
  ++(2, 0) to[twoport, t=$\bm{x}^{\ast}$]
  ++(1.5, 0) coordinate(conjout);

  \draw
  (mulsplit) to[short]
  ++(4, 0) node[mixer, anchor=west](multiply){};
  
  \draw
  (conjout) to[short]
  ++(1, 0) to[short] (multiply.2);

  \draw
  (multiply.3) to[short]
  (8, 5) node (maout) [minimum width=10mm, minimum height=10mm, anchor=west, draw=black, line width=0.25mm, align=center]{\small{moving}\\\small{average}\\\small{($N/2$)}}
  (maout.east) to[short]
  ++(1, 0) coordinate(maoutsplit);

  \draw
  (maoutsplit) node (divider) [minimum width=10mm, minimum height=10mm, anchor=west, draw=black, line width=0.25mm, align=center]{/}
  (divider.east) to[short, -*]
  ++(1,0) node[anchor=west]{$o_\text{correlation}$};
  
  \draw
  (topwmeas) to[short]
  ++(0, -1.5) to[short]
  ++(2, 0) to[twoport, t=$\abs{x}^2$]
  ++(1.5, 0) to[short]
  (8, 2) node (ma2out) [minimum width=10mm, minimum height=10mm, anchor=west, draw=black, line width=0.25mm, align=center]{\small{moving}\\\small{average}\\\small{($N$)}}
  (ma2out.east) to[short]
  ++(1.5, 0) to[short]
  (divider.south);

  \draw
  (mulsplit) to[short]
  ++(0, 1.5) to[twoport, t=$\bm{z}^{-N}$]
  ++(2, 0) to[short, -*]
  (12.5, 6.5) node[anchor=west]{$o_\text{delay}$};
\end{tikzpicture}
